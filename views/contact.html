<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacto</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

</head>

<body class="back">
    <header class="header-navbar ">
        <nav class="navbar navbar-expand-lg">
            <div class="container container-navbar">
                <a class="navbar-brand" href="#">
                    <img src="/images/Jalito.jpeg" alt="JalitoLogo" class="logo-image">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse flex-column" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="/views/home.html">INICIO</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/views/aboutUs.html">CONOCENOS</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/views/products.html">PRODUCTOS</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="#">CONTACTO</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-nowrap" href="/views/workWithUs.html">TRABAJÁ CON NOSOTROS</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section>
            <div class="conteiner">
                <div class="row mx-auto w-100">
                    <div class="col-sm-12 col-md-6">
                        <h1>Contacto <i class="fas fa-inbox msg-icon"></i></h1>
                        <ul class="list-unstyled">
                            <li class="text-contact">
                                <i class="fas fa-phone contact-icon">3492-15123456 </i>
                            </li>
                            <li>
                                <i class="fas fa-envelope contact-icon">jalitoRafaela@hotmail.com</i>
                            </li>
                            <li>
                                <i class="fas fa-map-marker-alt contact-icon">Rivadavia 115. Rafaela, Santa Fe</i>
                            </li>
                            <li>
                                <a href="https://www.instagram.com/jalito_rafaela/?hl=es-es"
                                    class="text-dark">
                                    <i class="fab fa-instagram">Visitá nuestro instagram </i></a>
                            </li>
                        </ul>

                    </div>

                    <div class="col-sm-12 col-md-6">
                        <form id="form-contact" method="get">
                            <div class="mb-3">
                                <label for="fname" class="form-label">Nombre</label>
                                <input type="text" class="form-control" id="fname">
                            </div>
                            <div class="mb-3">
                                <label for="email" class="form-label">Email</label>
                                <input type="text" class="form-control" id="email">
                            </div>
                            <div class="mb-3">
                                <label for="phoneNbr" class="form-label">Telefono (sin 0 ni 15) </label>
                                <input type="text" class="form-control" id="phoneNbr">
                            </div>

                            <div class="dropdown mb-3">
                                <label class="form-label" for="dropdownButton">Motivo del contacto</label>
                                <button type="button" class="btn btn-bd-secondary dropdown-toggle"
                                    data-bs-toggle="dropdown" aria-expanded="false" id="dropdownButton">
                                    Elige una opción
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownButton">
                                    <li><a class="dropdown-item" href="#"
                                            onclick="updateButton(this, 'motivoContacto')">Reserva</a></li>
                                    <li><a class="dropdown-item" href="#"
                                            onclick="updateButton(this, 'motivoContacto')">Sugerencia</a></li>
                                    <li><a class="dropdown-item" href="#"
                                            onclick="updateButton(this, 'motivoContacto')">Reclamo</a></li>
                                    <li><a class="dropdown-item" href="#"
                                            onclick="updateButton(this, 'motivoContacto')">Otro</a></li>
                                </ul>
                                <input type="hidden" id="motivoContacto" name="motivoContacto" value="">
                            </div>
                            <div class="mb-3">
                                <p>¿Con que frecuencia visitas el bar?</p>
                                <input type="radio" id="never" name="frequency" value="never">
                                <label for="never">Nunca fui</label><br>
                                <input type="radio" id="sometimes" name="frequency" value="sometimes">
                                <label for="sometimes">Voy ocacionalmente</label><br>
                                <input type="radio" id="always" name="frequency" value="always">
                                <label for="always">Voy todo el tiempo</label>
                            </div>
                            <div class="mb-3">
                                <label for="message" class="form-label">Mensaje</label>
                                <textarea class="form-control" id="message" rows="3"></textarea>
                            </div>
                            <p class="col-md-12">
                                <input type="button" id="btn-contact" class="btn btn-bd-primary" data-bs-toggle="button"
                                    value="Enviar" onclick="contactController()">
                            </p>
                        </form>
                    </div>
                </div>
            </div>



            <script>
                function updateButton(element, inputId) {
                    /*actualiza el texto */
                    document.getElementById('dropdownButton').innerText = element.innerText;
                    /*tengo que asegurarme de guardar el valor seleccionado*/
                    document.getElementById(inputId).value = element.innerText;
                }

                function contactController() {
                    var send;
                    send = true;
                    let aux = "";

                    if (document.getElementById('fname').value == '') {
                        aux += "-nombre\n";
                        send = false;
                    }
                    let email = document.getElementById('email').value;
                    if (document.getElementById('email').value == '') {
                        aux += "-correo electronico\n";
                        send = false;
                    }else if(!validateEmail(email)){
                        aux += "-email invalido\n";
                        send = false;
                    }

                    /*no solamente se valida que este completo sino que el formato sea correcto*/
                    let phoneNbr = document.getElementById('phoneNbr').value;
                    if (document.getElementById('phoneNbr').value == '') {
                        aux += "-telefono\n";
                        send = false;
                    }else if (!validatePhoneNumber(phoneNbr)) {
                        aux += "-telefono invalido\n";
                        send = false;
                    }

                    if (document.getElementById('motivoContacto').value == '') {
                        aux += "-motivo del contacto\n"
                        send = false;
                    }
                    if (!document.querySelector('input[name="frequency"]:checked')) {
                        aux += "-frecuencia de visita\n";
                        send = false;
                    }
                    if (document.getElementById('message').value == '') {
                        aux += "-mensaje\n";
                        send = false;
                    }

                    if (send) {
                        document.getElementById('form-contact').submit();
                        window.location.href = "/views/home.html";
                    }
                    else {
                        alert("Faltan completar los siguientes campos: \n" + aux);
                        document.getElementById('btn-contact').value = 'Intentar otra vez'
                    }
                }

                function validateEmail(email) {
                    var re = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
                    return re.test(email);
                }

                function validatePhoneNumber(phoneNbr) {
                    var re = /^[0-9]{10}$/;
                    return re.test(phoneNbr);
                }
            </script>

        </section>
    </main>


    <footer>
        <ul class="list-unstyled">
            <li class="text-footer">
                <i class="fas fa-map-marker-alt"></i> Rivadavia 115. Rafaela, Sta. Fe
            </li>
            <li class="text-footer">
                <i class="fas fa-phone-alt"></i> 3492 - 15123456
            </li>
            <li class="text-footer">
                <a href="https://www.instagram.com/jalito_rafaela/?hl=es-es">
                    <i class="fab fa-instagram"></i> Instagram </a>
            </li>
        </ul>
    </footer>

</body>

</html>